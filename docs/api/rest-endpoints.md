# REST Endpoint Inventory

The admin portal consumes the Atlas REST API via the shared Axios client (`src/lib/api.ts`). Below are the observed endpoints and their call sites.

| Method | Path                                | Purpose                                                                      | Primary callers                                                                                                                         |
| ------ | ----------------------------------- | ---------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| GET    | `/bookings?include=bankAccount`     | Fetch bookings with related bank account data.                               | `src/api/bookingsApi.js`, bookings page. 【F:src/api/bookingsApi.js†L4-L7】                                                             |
| POST   | `/bookings`                         | Create a booking.                                                            | `src/api/bookingsApi.js`, bookings page. 【F:src/api/bookingsApi.js†L9-L13】【F:src/pages/Bookings.jsx†L283-L317】                      |
| PUT    | `/bookings/:id`                     | Update an existing booking.                                                  | `src/api/bookingsApi.js`, bookings page. 【F:src/api/bookingsApi.js†L14-L17】【F:src/pages/Bookings.jsx†L283-L323】                     |
| DELETE | `/bookings/:id`                     | Delete a booking.                                                            | `src/api/bookingsApi.js`, bookings page. 【F:src/api/bookingsApi.js†L18-L20】【F:src/pages/Bookings.jsx†L402-L407】                     |
| GET    | `/bookings`                         | Fetch bookings with optional date filters.                                   | `src/pages/Bookings.jsx`. 【F:src/pages/Bookings.jsx†L221-L240】                                                                        |
| GET    | `/bookings` (post-mutation refresh) | Refresh bookings after create/update.                                        | `src/pages/Bookings.jsx`. 【F:src/pages/Bookings.jsx†L318-L324】                                                                        |
| GET    | `/guests`                           | Hydrate guest cache and manage guest list.                                   | `src/services/guests.local.ts`, guests page. 【F:src/services/guests.local.ts†L17-L25】【F:src/pages/Guests.jsx†L36-L51】               |
| GET    | `/guests/:id`                       | Fetch a specific guest when editing a booking.                               | `src/pages/Bookings.jsx`. 【F:src/pages/Bookings.jsx†L153-L187】                                                                        |
| POST   | `/guests`                           | Create a guest from bookings or guests page.                                 | `src/pages/Bookings.jsx†L197-L215】【F:src/pages/Guests.jsx†L80-L99】                                                                   |
| PUT    | `/guests/:id`                       | Update guest info.                                                           | `src/pages/Guests.jsx`. 【F:src/pages/Guests.jsx†L80-L99】                                                                              |
| DELETE | `/guests/:id`                       | Remove a guest.                                                              | `src/pages/Guests.jsx`. 【F:src/pages/Guests.jsx†L101-L123】                                                                            |
| GET    | `/listings`                         | Fetch listings.                                                              | `src/pages/Bookings.jsx`, listings page. 【F:src/pages/Bookings.jsx†L88-L97】【F:src/pages/Listings.jsx†L22-L36】                       |
| POST   | `/listings`                         | Create listing.                                                              | `src/pages/Listings.jsx`. 【F:src/pages/Listings.jsx†L53-L76】                                                                          |
| PUT    | `/listings/:id`                     | Update listing.                                                              | `src/pages/Listings.jsx`. 【F:src/pages/Listings.jsx†L53-L76】                                                                          |
| DELETE | `/listings/:id`                     | Delete listing.                                                              | `src/pages/Listings.jsx`. 【F:src/pages/Listings.jsx†L84-L96】                                                                          |
| GET    | `/properties`                       | Fetch properties for listings UI.                                            | `src/pages/Listings.jsx`. 【F:src/pages/Listings.jsx†L22-L36】                                                                          |
| POST   | `/properties`                       | Create property.                                                             | `src/pages/Properties.jsx`. 【F:src/pages/Properties.jsx†L22-L70】                                                                      |
| PUT    | `/properties/:id`                   | Update property.                                                             | `src/pages/Properties.jsx`. 【F:src/pages/Properties.jsx†L22-L70】                                                                      |
| DELETE | `/properties/:id`                   | Delete property.                                                             | `src/pages/Properties.jsx`. 【F:src/pages/Properties.jsx†L71-L79】                                                                      |
| GET    | `/bankaccounts`                     | Fetch bank accounts.                                                         | `src/api/bankAccountsApi.js`, bank accounts page. 【F:src/api/bankAccountsApi.js†L4-L7】【F:src/pages/BankAccountsPage.jsx†L39-L55】    |
| POST   | `/bankaccounts`                     | Create bank account.                                                         | `src/api/bankAccountsApi.js`, bank accounts page. 【F:src/api/bankAccountsApi.js†L8-L11】【F:src/pages/BankAccountsPage.jsx†L74-L92】   |
| PUT    | `/bankaccounts/:id`                 | Update bank account.                                                         | `src/api/bankAccountsApi.js`, bank accounts page. 【F:src/api/bankAccountsApi.js†L12-L15】【F:src/pages/BankAccountsPage.jsx†L74-L92】  |
| DELETE | `/bankaccounts/:id`                 | Delete bank account.                                                         | `src/api/bankAccountsApi.js`, bank accounts page. 【F:src/api/bankAccountsApi.js†L16-L19】【F:src/pages/BankAccountsPage.jsx†L94-L107】 |
| GET    | `/reports/bank-account-earnings`    | Fetch earnings grouped by bank account.                                      | `src/api/bankAccountsApi.js`. 【F:src/api/bankAccountsApi.js†L20-L23】                                                                  |
| GET    | `/admin/reports/earnings/monthly`   | Monthly earnings; falls back to `/admin/reports/bookings`.                   | `src/components/EarningsReport.jsx`. 【F:src/components/EarningsReport.jsx†L30-L52】                                                    |
| GET    | `/admin/reports/bookings`           | Fetch bookings for reporting/fallback.                                       | `src/components/EarningsReport.jsx†L37-L49】【F:src/components/CustomReportGenerator.jsx†L20-L36】                                      |
| GET    | `/admin/reports/listings`           | Fetch listings metadata for reports.                                         | `src/components/CustomReportGenerator.jsx†L20-L36】【F:src/components/MultiCalendarEarningsReport.jsx†L32-L42】                         |
| GET    | `/admin/reports/payouts/daily`      | Daily payout feed; falls back to `/admin/reports/payouts`.                   | `src/components/DailyPayoutReport.jsx`. 【F:src/components/DailyPayoutReport.jsx†L31-L44】                                              |
| GET    | `/admin/reports/payouts`            | Legacy payout endpoint fallback.                                             | `src/components/DailyPayoutReport.jsx`. 【F:src/components/DailyPayoutReport.jsx†L39-L44】                                              |
| GET    | `/admin/reports/bookings/calendar`  | Pre-aggregated bookings calendar; falls back to listings/bookings endpoints. | `src/components/MultiCalendarEarningsReport.jsx`. 【F:src/components/MultiCalendarEarningsReport.jsx†L22-L68】                          |

> **Note:** All requests inherit credentials (`credentials: 'include'`) and the API base URL from `src/lib/api.ts`, which trims trailing slashes and blocks localhost usage in production builds. 【F:src/lib/api.ts†L1-L32】【F:src/utils/env.ts†L1-L8】
